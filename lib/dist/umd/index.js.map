{"version":3,"sources":["webpack://TfwBlurryPreview/webpack/universalModuleDefinition","webpack://TfwBlurryPreview/../src/index.ts","webpack://TfwBlurryPreview/../src/program/index.ts","webpack://TfwBlurryPreview/../src/program/program.ts","webpack://TfwBlurryPreview/../src/scene/index.ts","webpack://TfwBlurryPreview/../src/scene/scene.ts","webpack://TfwBlurryPreview/webpack/bootstrap","webpack://TfwBlurryPreview/webpack/startup"],"names":["root","factory","exports","module","define","amd","this","default","create","gl","attachShader","prg","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","call"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TfwBlurryPreview\"] = factory();\n\telse\n\t\troot[\"TfwBlurryPreview\"] = factory();\n})(this, function() {\nreturn ","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar scene_1 = __importDefault(require(\"./scene\"));\nexports.default = {\n    Scene: scene_1.default\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = void 0;\nvar program_1 = require(\"./program\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return __importDefault(program_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    create: create\n};\nfunction create(gl, shaders) {\n    console.log(\"[program] gl, shaders = \", gl, shaders); // @FIXME: Remove this line written on 2020-12-19 at 21:35\n    var prg = gl.createProgram();\n    if (!prg)\n        throw \"Unable to create Program!\";\n    gl.attachShader(prg, loadVertexShader(gl, shaders.vert));\n    gl.attachShader(prg, loadFragmentShader(gl, shaders.frag));\n    gl.linkProgram(prg);\n    // If creating the shader program failed, alert\n    if (!gl.getProgramParameter(prg, gl.LINK_STATUS)) {\n        throw \"Unable to link the shader program: \" + gl.getProgramInfoLog(prg);\n    }\n    gl.useProgram(prg);\n    return prg;\n}\nfunction loadVertexShader(gl, code) {\n    try {\n        return loadShader(gl, code, gl.VERTEX_SHADER);\n    }\n    catch (ex) {\n        console.info(code);\n        throw \"Unable to compile VERTEX shader: \" + ex;\n    }\n}\nfunction loadFragmentShader(gl, code) {\n    try {\n        return loadShader(gl, code, gl.FRAGMENT_SHADER);\n    }\n    catch (ex) {\n        console.info(code);\n        throw \"Unable to compile FRAGMENT shader: \" + ex;\n    }\n}\nfunction loadShader(gl, code, type) {\n    var shader = gl.createShader(type);\n    if (!shader)\n        throw \"Invalid shader type: \" + type + \"!\";\n    gl.shaderSource(shader, code);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        var message = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw message;\n    }\n    return shader;\n}\n//# sourceMappingURL=program.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = void 0;\nvar scene_1 = require(\"./scene\");\nObject.defineProperty(exports, \"default\", { enumerable: true, get: function () { return __importDefault(scene_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar program_1 = __importDefault(require(\"../program\"));\nvar Scene = /** @class */ (function () {\n    function Scene(canvas, settings) {\n        var _this = this;\n        this.canvas = canvas;\n        this.lastWidth = 0;\n        this.lastHeight = 0;\n        this.program = {\n            create: function (shaders) { return program_1.default.create(_this.gl, shaders); }\n        };\n        this.settings = __assign({ alpha: false, desynchronized: false, antialias: true, depth: true, failIfMajorPerformanceCaveat: false, powerPreference: \"default\", premultipliedAlpha: false, preserveDrawingBuffer: false, stencil: false }, settings);\n        var gl2 = canvas.getContext(\"webgl2\", this.settings);\n        if (gl2) {\n            this.gl = gl2;\n            this.webglVersion = 2;\n        }\n        else {\n            var gl = canvas.getContext(\"webgl\", this.settings);\n            if (!gl)\n                throw \"Impossible to create a WebGL context!\";\n            this.gl = gl;\n            this.webglVersion = 1;\n        }\n    }\n    /**\n     * Call this function at every frame render to ensure that the canvas size is reported to the WebGL scene viewport.\n     */\n    Scene.prototype.resize = function () {\n        var _a = this, lastWidth = _a.lastWidth, lastHeight = _a.lastHeight, canvas = _a.canvas, gl = _a.gl;\n        var rect = canvas.getBoundingClientRect();\n        if (lastWidth !== rect.width || lastHeight !== rect.height) {\n            canvas.setAttribute(\"width\", \"\" + rect.width);\n            canvas.setAttribute(\"height\", \"\" + rect.height);\n            this.lastWidth = rect.width;\n            this.lastHeight = rect.height;\n            gl.viewport(0, 0, this.lastWidth, this.lastHeight);\n        }\n    };\n    Object.defineProperty(Scene.prototype, \"width\", {\n        get: function () { return this.gl.drawingBufferWidth; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"height\", {\n        get: function () { return this.gl.drawingBufferHeight; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"aspectRatio\", {\n        /**\n         * Return the current aspect ratio: width / height.\n         */\n        get: function () {\n            var gl = this.gl;\n            return gl.drawingBufferWidth / gl.drawingBufferHeight;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Scene;\n}());\nexports.default = Scene;\n//# sourceMappingURL=scene.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(287);\n"],"sourceRoot":""}